[build]
  command = "npm run build"
  publish = ".output/public"
  functions = ".output/server"

# Serve Sanity Studio static files BEFORE Nuxt's serverless function
[[redirects]]
  from = "/studio"
  to = "/studio/index.html"
  status = 200
  force = true

[[redirects]]
  from = "/studio/*"
  to = "/studio/:splat"
  status = 200
  force = true

# Catch-all for Nuxt routing (Fixes 404 on refresh)
[[redirects]]
  from = "/*"
  to = "/.netlify/functions/server"
  status = 200
